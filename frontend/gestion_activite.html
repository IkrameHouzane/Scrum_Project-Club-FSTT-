<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des Activit√©s - Club FSTT</title>
  <link rel="stylesheet" href="style_gestion_activite.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <header>
    <h1>Club √âtudiant FSTT</h1>
    <p>Gestion des Activit√©s</p>
  </header>

  <nav class="nav-bar">
    <div class="nav-container">
      <a href="dashboard.html" class="nav-link"><i class="fas fa-arrow-left"></i> Retour au tableau de bord</a>
      <div class="nav-user">
        <span id="user-role"></span>
        <button id="logout-btn" class="btn btn-outline btn-small">D√©connexion</button>
      </div>
    </div>
  </nav>

  <main>
    <div class="container">
      <div class="header-section">
        <h2>Mes Activit√©s</h2>
        <a href="create.html" class="btn btn-primary">
          <i class="fas fa-plus"></i> Cr√©er une activit√©
        </a>
      </div>

      <!-- Messages -->
      <div id="message-container" class="message" style="display: none;"></div>

      <!-- Filtres et recherche -->
      <div class="filters-section">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" id="search-input" placeholder="Rechercher une activit√©...">
        </div>
        <div class="filter-group">
          <select id="category-filter">
            <option value="">Toutes les cat√©gories</option>
          </select>
          <select id="status-filter">
            <option value="">Tous les statuts</option>
            <option value="Planifiee">Planifi√©e</option>
            <option value="Annulee">Annul√©e</option>
            <option value="Terminee">Termin√©e</option>
          </select>
        </div>
        <button id="refresh-btn" class="btn btn-secondary">
          <i class="fas fa-sync-alt"></i> Actualiser
        </button>
      </div>

      <!-- Conteneur des activit√©s -->
      <div id="activities-container" class="activities-grid">
        <div class="loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Chargement des activit√©s...</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal de confirmation d'annulation -->
  <div id="cancel-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Annuler l'activit√©</h3>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <p id="cancel-message">√ätes-vous s√ªr de vouloir annuler cette activit√© ?</p>
        <p class="warning-text">
          <i class="fas fa-exclamation-triangle"></i>
          Cette action est irr√©versible. <span id="participants-count">0</span> participant(s) seront notifi√©(s).
        </p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-modal">Annuler</button>
        <button id="cancel-confirm-btn" class="btn btn-danger">
          <i class="fas fa-ban"></i> Oui, annuler l'activit√©
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts - ORDRE IMPORTANT -->
  <script src="auth.js"></script>
  <script src="script.js"></script>
  
  <!-- Script de secours si script.js ne charge pas -->
  <script>
    console.log('üîç V√©rification du chargement...');
    
    // Attendre un peu que les scripts se chargent
    setTimeout(() => {
      if (typeof window.loadActivities !== 'function') {
        console.error('‚ùå script.js n\'a pas charg√© correctement!');
        console.log('üìÇ V√©rifiez que script.js existe dans le m√™me dossier que ce HTML');
        
        // Afficher un message d'erreur √† l'utilisateur
        const container = document.getElementById('activities-container');
        if (container) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; margin: 20px;">
              <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: #ffc107; margin-bottom: 20px;"></i>
              <h3 style="color: #856404;">Erreur de chargement des scripts</h3>
              <p style="color: #856404; margin: 15px 0;">Le fichier <strong>script.js</strong> n'a pas pu √™tre charg√©.</p>
              <p style="color: #856404; margin: 15px 0;">V√©rifiez que le fichier existe dans : <code>/frontend/script.js</code></p>
              <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 20px;">
                <i class="fas fa-redo"></i> Recharger la page
              </button>
            </div>
          `;
        }
      } else {
        console.log('‚úÖ Scripts charg√©s avec succ√®s');
      }
    }, 500);
  </script>
</body>
</html>